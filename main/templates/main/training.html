{% extends "main.html" %}
{% load static %}

{% block title %}Train{% endblock %}

{% block main %}
<div class="row align-items-stretch">
    <div class="col-md-6 d-flex flex-column">
        <form action="#" method="post" class="bg-white rounded shadow-sm p-4 flex-grow-1" onsubmit="event.preventDefault(); document.getElementById('rounds').disabled = true;">
          {% csrf_token %}
          <div class="form-group">
            <div class="alert alert-warning" id="model-description">
                <p class="text-muted text-center">Выберите модель для просмотра описания.</p>
            </div>
            <select class="form-control" id="model" name="model" required onchange="updateModelDescription(this.value)">
              <option value="" selected disabled>Выберите модель</option>
              <option value="cnn">CNN</option>
              <option value="dnn">DNN</option>
              <option value="cnn_bilstm">CNN & BiLSTM</option>
            </select>
          </div> 
          <div class="form-group mt-4">
            <label for="rounds">Количество раундов обучения: <strong id="rounds-value">10</strong></label>
            <input type="range" class="form-range" id="rounds" name="rounds" min="1" max="100" value="10"
                   oninput="document.getElementById('rounds-value').textContent = this.value;"
                   onchange="TrainingProgressChart.updateRounds(this.value);">
          </div>
      
          <button type="submit" class="btn w-100 btn-primary mt-auto">Начать обучения</button>    
        </form>
    </div> 
    <div class="col-md-6 d-flex flex-column">
        <div class="bg-white rounded shadow-sm p-4 flex-grow-1">
            
            <div class="">
                <h5 class="text-center">Процесс обучения</h5>
                <canvas id="training-progress-chart" height="200"></canvas>
            </div>
            <div id="training-logs" class="">
              <div class="alert alert-info" role="alert" style="max-height: 300px; overflow-y: auto;">
                Пока что нет подписанных шлюзов. <br>
                Ждём...
              </div>
            </div>
        </div>
    </div> 
</div>

  
 
{% endblock %}
{% block include_scripts %}
<script src="{% static 'main/scripts/training.js' %}"></script>
{% endblock %}